/*
All of the code within the ZingChart software is developed and copyrighted by ZingChart, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from ZingChart. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 2.9.4
*/
zingchart.setModule("sunburst"),function(){var e={},t={},a={},r={},i={},l={};zingchart.bind(null,"dataparse",function(n,o){var d,s,p,h,v,u,c,g,f,x=zingchart.getLoader(n.id);for(h=0,v=o.graphset.length;h<v;h++)if(o.graphset[h].type&&"sunburst"===o.graphset[h].type){e[n.id]=!0,r[n.id]||(r[n.id]={}),i[n.id]||(i[n.id]=-1),l[n.id]=[],t[n.id]||(t[n.id]=JSON.stringify(o));var b=o.graphset[h].type;o.graphset[h]["plugin-type"]=b;var _=o.graphset[h];zingchart.normalize(_),_.type="pie";var z=zingchart.getGraphInfo(x,o,h),y={};_.options&&(y=_.options[b]||_.options),ZC._todash_(y);var C=y.root||"";a[n.id]=C;var m=ZC._i_(y.slice||"0"),A=ZC._i_(y.space||"0"),Z=y.widths||[],w=y.palette||["#6A921F","#007FA3","#A62B02","#B79007","#563D02","#0B32A0","#00BAF2","#E80C60","#E2D51A","#9B26AF","#FB301E","#00AE4D","#20398B"],k=y["text-attr"]||"text",B=y["value-attr"]||"value";if(_.series=_.series||[],!(_.series instanceof Array)){var D=[],F={},O=function(e,t){var a=(e.text||e.name||e[k]).toLowerCase().replace(/[^a-z0-9_]+/gi,"");F[a]?a+=F[a]++:F[a]=1;var r={id:a,text:e.text||e.name||e[k]||a,value:e.value||e.size||e[B],parent:t||""};if(D.push(r),e.children)for(var i=0;i<e.children.length;i++)O(e.children[i],a)};O(_.series,""),_.series=D}for(var E,V={},J=[].concat(_.series).reverse(),L=0,M=J.length,T=0;J.length&&M-- >=0;)for(d=J.length-1;d>=0;d--)for(E in u=(c=J[d]).id||"id"+L++,""===(f=c.parent||"")?(V[u]={id:u,level:0,parent:"",text:c.text||c.name||c[k]||u,value:c.value||c.size||c[B],children:[]},l[n.id].push(u),J.splice(d,1)):V[f]&&(V[f].children.push(u),V[u]={id:u,level:V[f].level+1,parent:f,text:c.text||c.name||c[k]||u,value:c.value||c.size||c[B],children:[]},J.splice(d,1),T=Math.max(T,V[u].level)),c)0===E.indexOf("data-")&&(V[u][E]=c[E]);var G=function(e,t){return t=t||[],V[e]&&""!==V[e].parent&&(t.push(V[e].parent),t=t.concat(G(V[e].parent))),t};if(""!==C){for(u in V)u!==C?(g=G(u),-1===ZC.AV(g,C)&&delete V[u]):(V[u]["up-parent"]=V[u].parent,V[u].parent="");var K=V[C].level;for(u in V)V[u].level-=K;T-=K}var N=0,S=0;for(p=0;p<=T;p++){if(0===p)for(u in V)0===V[u].level&&S++;for(u in V){var I="";r[n.id][u]?I=r[n.id][u]:(V[u].level===p&&(I=0===V[u].level||1===V[u].level&&1===S?w[N++%w.length]:V[V[u].parent].color),r[n.id][u]=I),V[u].color=I}}var Q=function(e){if(V[e]){if(null===ZC._n_(V[e].value))if(0===V[e].children.length)V[e].value=0;else{for(var t=0,a=0;a<V[e].children.length;a++)t+=Q(V[e].children[a]);V[e].value=t}return parseFloat(V[e].value)}};for(u in V)V[u].value=Q(u);if(-1===i[n.id]){for(u in V)if(0!==V[u].level&&(1!==V[u].level||1!==S)&&r[n.id][u]){g=G(u);var j=1===S?g[g.length-2]:g[g.length-1],q=1-V[u].value/V[j].value;r[n.id][u]=V[u].color=ZC.AO.QV(V[u].color,40*q)}i[n.id]=1}var H=[],P=0;for(p=0;p<=T;p++){if(H[p]){var R=[];for(d=0;d<H[p].length;d++){var U=(c=V[H[p][d]]).children,W=0;for(s=0;s<U.length;s++)R.push(U[s]),W+=V[U[s]].value;if(W<c.value){var X="sbfakeid"+P++;V[X]={id:X,parent:c.id,value:c.value-W,level:c.level,children:[],fake:!0,color:c.color},R.push(X)}}H[p]=[].concat(R)}else for(u in H[p]=[],V)V[u].level===p&&H[p].push(u);p<T&&(H[p+1]=[].concat(H[p]))}o.graphset.splice(h,1);var Y={};ZC._cp_(_,Y),delete Y.options,delete Y.series,Y["background-color"]="none",Y.x=z.graph.x,Y.y=z.graph.y,Y.width=z.graph.width,Y.height=z.graph.height,Y.plot=Y.plot||{},Y.plot["value-box"]=Y.plot["value-box"]||{},Y.plot["value-box"].placement=Y.plot["value-box"].placement||"radial",Y.plot.detach=!1;var $=.95*(Math.min(z.plotarea.width,z.plotarea.height)/2-m-T*A),ee=ZC._i_($/(T+1));for(p=0;p<=T;p++){var te={};if(ZC._cp_(Y,te),p>0&&(delete te.title,delete te.subtitle,delete te.source,delete te.legend),te.id=x.K+p,0===Z.length)te.plot.size=m+ee*(p+1)+A*p,te.plot.slice=m+ee*p+A*p;else{for(var ae=0,re=0;re<p;re++)ae+=Z[re]||ee;te.plot.slice=m+ae+A*p,ae+=Z[p]||ee,te.plot.size=m+ae+A*p}te.series=[];var ie=-1;for(d=0;d<H[p].length;d++){var le=V[H[p][d]].text,ne=le,oe=V[H[p][d]].id;for(E in f=V[H[p][d]]["up-parent"]||V[H[p][d]].parent,0===p&&(""!==f||1===S&&l[n.id].length>1&&-1!==ZC.AV(l[n.id],oe))&&(ne="\u25b2 "+ne),c={"data-l0items":S,"data-parent":f,"data-uid":oe,"data-level":V[H[p][d]].level,"data-vbtext":ne,text:le,values:[V[H[p][d]].value],"background-color":V[H[p][d]].color,"hover-state":{"background-color":ZC.AO.JK(V[H[p][d]].color,20)}},V[H[p][d]])0===E.indexOf("data-")&&(c[E]=V[H[p][d]][E]);V[H[p][d]].fake&&(c.visible=!1),V[H[p][d]].fake?-1===ie?(te.series.push(c),ie=te.series.length-1):te.series[ie].values[0]+=c.values[0]:(ie=-1,te.series.push(c))}o.graphset.splice(h,0,te)}var de={};ZC._cp_(_,de),delete de.options,delete de.series,de.type="null",de.x=z.graph.x,de.y=z.graph.y,de.width=z.graph.width,de.height=z.graph.height,o.graphset.splice(h,0,de)}return o});var n=null;zingchart.bind(null,"node_click",function(e){if("touchend"===e.ev.type){if(null===n)return void(n=(new Date).getTime());if((new Date).getTime()-n>=300)return void(n=(new Date).getTime());n=null}else if(0!==e.ev.button)return;var r=zingchart.getLoader(e.id);if(r){var i=zingchart.getGraph(r,e.graphid);if(i&&"sunburst"===i.o["plugin-type"]){var o=JSON.parse(t[e.id]);(""!==e["data-parent"]||e["data-l0items"]>1||l[e.id].length>1&&-1!==ZC.AV(l[e.id],e["data-uid"]))&&(o.graphset[0].options=o.graphset[0].options||{},a[e.id]===e["data-uid"]?o.graphset[0].options.root=e["data-parent"]:o.graphset[0].options.root=e["data-uid"],zingchart.exec(e.id,"setdata",{data:o}))}}});zingchart.bind(null,"destroy",function(n){e[n.id]&&(delete e[n.id],t={},a={},r={},i={},l={})})}();